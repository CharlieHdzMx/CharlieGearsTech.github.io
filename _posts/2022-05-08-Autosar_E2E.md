---
layout: post
title: Autosar E2E
excerpt: " E2E Autosar"
modified: 5/07/2023, 9:00:24
tags: [Autosar, E2E, Safety, C]
comments: true
category: blog
---

# Introduction
E2E, an integral component of the Autosar stack, plays a crucial role in managing various mechanisms for safety-critical software components. Its primary purpose is to detect and mitigate issues, particularly focusing on systematic failures, low-level communication layers, and hardware failures. E2E safeguards against a range of failures, including:
* Messages being lost during transmission or due to the unavailability of the communication channel.
* Delayed message delivery.
* Improper insertion of messages.
* Unintended duplication of messages.
* Corruption of messages.

E2E protection is essential for detecting these failures during runtime execution and triggering specific recovery mechanisms. The methods for safeguarding E2E integrity depend on the chosen E2E profiles, with the primary mechanisms being:
* CRC (Cyclic Redundancy Check), which involves generating a numeric value based on the content of the message. This value is used to detect any corruption or alteration of messages during transmission.
* Message counter. In the context of periodic message communication, this counter keeps track of the sequence of messages being transmitted. It helps detect any undesired duplication of messages, ensuring that each message is received only once and in the expected order.
* On the reception side, another significant E2E protection mechanism is the use of a timer. This timer is employed to determine if a message has been lost and not communicated within a specific time frame. If the expected message does not arrive within the defined timeframe, it triggers actions to handle the situation, such as error reporting or retransmission requests.
* An 'Alive Counter' is used. This counter increments with each transmission request, and its value is verified on the reception side to ensure correct increments.
* A unique DataID being used to verify the identity of each transmitted safety-relevant data element.
* A message type distinguishing between request and responses in case of E2E protection for functions.
* A message result distinguising between of normal returns and errors in each case of E2E communication protection for methods.
* Timeout comunication for the receiver.
* Timeout for acknowledge of the sender.

# E2E Profiles
E2E profiles encompass a combination of protection mechanisms, message formats, and parameter configurations.

# Autosar E2E mechanism
In the Autosar specification, two primary components are dedicated to E2E (End-to-End) protection:
* Protection Wrapper.
* Transformer Solution.

These mechanisms are selected in a project based on the customer requirements or the profile to use.

## Protection Wrapper
* E2E Protection Wrapper (E2E PW) extends the standard interfaces of Sender/Receiver (Rte_Read and Rte_Write) by introducing Rte_E2EPW_Read and Rte_E2EPW_Write. To enable this functionality, the E2E and CRC libraries must be included as project references. E2E PW operates exclusively with conventional I-PDUs. When E2E is necessary for transmission, E2E PW incorporates a counter and CRC, sending the resulting data to RTE. The counter and CRC's placement is contingent on the client's profile and specification. For message reception requiring E2E, E2E PW receives the message, validates it through CRC and counter processing, and only passes valid data to the message, along with returning a status indicator.

E2E
