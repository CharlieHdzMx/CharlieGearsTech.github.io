---
layout: post
title: LIN communication
excerpt: LIN communication
modified: 5/07/2021, 9:00:24
tags:
  - Embedded Software
  - LIN
comments: true
category: blog
---
**LIN** (Local Interconnected Network) is a serial automotive network protocol designed to establish a Local Network connection between devices at a lower cost compared to other networks like CAN (Controller Area Network), CAN FD (Flexible Data-rate), etc. Unlike more complex networks, LIN is not intended to be the primary network for the entire vehicle but serves as a complementary network for specific applications within the vehicle.

![01](https://github.com/CharlieHdzMx/CharlieHdzMx.github.io/assets/6202653/d1f84fcb-16c2-422c-9dc7-b09d26e77eaf)

In the provided diagram, the red arrows represent CAN communication, while the green arrows represent LIN communication. Notably, the communication between the modules of the Seat Belt is exclusively through LIN. However, the communication between the Security Modules and the Seat Belt involves the use of CAN. This design choice is influenced by the fact that LIN does not offer the same bandwidth as CAN. Therefore, for data exchanges involving larger amounts of information, where LIN might be less suitable, CAN is employed to ensure efficient communication between the Seat Belt and other Security Modules.

The main properties of a LIN bus are:
1. One master for “**n**” slaves.
2. Similar low cost implementation of sillicon related to **UART/SCI** communication.
3. **Self sycnhronization** without the need of external clock in the slave nodes.
4. Deterministic signal transmision

# Node
Within a LIN cluster, nodes are signal based interaction layers to allow the Application SW to access the LIN physical layer.

![02](https://github.com/CharlieHdzMx/CharlieHdzMx.github.io/assets/6202653/f4b4aeed-72c9-4a96-bd26-e1dca85fe92b)

Within the LIN interface, there is an attached "Transport layer" responsible for defining the transportation of one or more frames, including Single Frames or Multiple Frames. Positioned between the Physical Frame Handling and the Application layers, the transport layer plays a crucial role in managing the transmission and reception of frames, ensuring effective communication within the LIN network.

![03](https://github.com/CharlieHdzMx/CharlieHdzMx.github.io/assets/6202653/231f30da-4557-4584-a52e-4fdd0c5214fd)

In a LIN Cluster, there is always a Master Node and one or more Slave Nodes. The Master Node encompasses two types of tasks: a Master Task and a Slave Task. On the other hand, Slave Nodes can only contain Slave Tasks.
1. **Master Task:** Responsible for determining the flow of communication between nodes within the LIN bus.
2. **Slave Task:** Provides the necessary data for each frame within the LIN communication.

In the LIN Cluster architecture, the Master Node initiates a process where it requests data from each Slave Node in parallel. Simultaneously, the Master Node also provides data from its own node, especially when a Slave Node requires information to formulate a response. This bidirectional exchange of data ensures effective communication and coordination within the LIN network.

# Frame
In the LIN communication protocol, a frame is composed of a header and a response. The responsibilities for providing these components are divided between the Master and Slave tasks:
1. **Header:**
   - Provided exclusively by the Master task.
   - Mainly comprises a break field, synchronization field, and a frame ID.
2. **Response:**
   - Provided exclusively by the Slave task.
   - Mainly consists of a data field and a checksum.

This division ensures that the Master and Slave nodes each contribute essential information to the construction of a LIN frame, maintaining a structured and coordinated communication process.
